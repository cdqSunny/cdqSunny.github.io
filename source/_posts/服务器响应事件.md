---
title: onreadystatechange事件
tags: [JS]
date: 2020-8-22 18:00:00
categories: 服务器响应事件
---



onreadystatechange 事件 

<!--more-->

onreadystatechange 事件 和 onload 事件的区别

 \* 都是服务器响应事件

 \* 兼容性不同



**onload 是新出的,老版本的浏览器不兼容** 



 **onreadystatechange  浏览器兼容比较好**

作用:

   1.可以多次调用

​    2.需要判断执行几次,默认执行3次,   xhr.readyState==4 (才可以响应服务器的数据1次)

```js
  //  1.实例化对象
    let xhr = new XMLHttpRequest();
    // 2.  设置请求方式和地址
    xhr.open('post', 'http://www.tuling123.com/openapi/api');
    // 3.请求头
    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    // 4. 发送请求
    xhr.send('key=8b2116b8ddb94b6681fbbef3ee9bbbce&info= ');
    // 5. 响应回调
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
            console.log(xhr.responseText);
        }
    }
```

​      

